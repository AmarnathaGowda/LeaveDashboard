<div class="container text-center">
  <div class="row">
    <h3>Dashboard Controls</h3>
  </div>
  <div class="row">
    <table class="table table-responsive table-striped">
      <thead>
        <tr>
          <th  scope="col">Drag</th>
          <th scope="col">Order</th>
          <th scope="col">Original Chart Name</th>
          <th>Display Name</th>
          <th scope="col">Controls</th>
          
        </tr>
      </thead>
      <tbody cdkDropList [cdkDropListData]="nonDragChartData">
        <tr *ngFor="let data of nonDragChartData; let i = index" 
          cdkDrag [cdkDragDisabled]="data.disabled"
           [ngStyle]="{'background-color':data.disabled === true ? 'rgb(169 169 169 / 80%)' : 'inherit' }" cdkDragLockAxis="y">
          <th class="col-xs drag-col" >
            <div *ngIf="!data.disabled" class="drag-handle" [ngStyle]="{'cursor':data.disabled === true ? 'no-drop' : 'move' }">
              <ng-container [ngTemplateOutlet]="dragHandleTmpl"> </ng-container>  
            </div>
          </th>
          <td>{{ data.sortOrder }}</td>
          <td (click)="getRowDetails(data, i)">
            <span >{{data.graphName}}</span>
           
          </td>
          <td><input type="text" class="form-control" value [(ngModel)]="data.displayName" /></td>
          <td >
            <div class="d-flex justify-content-center">
              <div class="form-check" *ngIf="!data.disabled">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="hidden"
                  [checked]="data.isHidden"
                  #configcheckbox
                  (change)="hideStatus($event, data)"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Hide
                </label>
              </div>
              &nbsp;
              <div class="form-check" *ngIf="data?.isCustom">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="delete"
                  [checked]="data.isDeleted"
                  #configcheckbox
                  (change)="deleteStatus($event, data)"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Delete &nbsp;
                </label> 
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  [checked]="data.isSlideShow"
                  #configcheckbox
                  (change)="addToSlideShow($event, data)"                
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Add to Slideshow
                </label>
              </div>
            </div>
          </td>
         
        </tr>
      </tbody>
      <tbody cdkDropList [cdkDropListData]="dragChartData"  (cdkDropListDropped)="onDrop($event)">
        <tr *ngFor="let data of dragChartData; let i = index" 
          cdkDrag [cdkDragDisabled]="data.disabled"
           [ngStyle]="{'background-color':data.disabled === true ? 'rgb(169 169 169 / 80%)' : 'inherit' }" cdkDragLockAxis="y">
          <th class="col-xs drag-col" >
            <div *ngIf="!data.disabled" class="drag-handle" [ngStyle]="{'cursor':data.disabled === true ? 'no-drop' : 'move' }">
              <ng-container [ngTemplateOutlet]="dragHandleTmpl"> </ng-container>  
            </div>
          </th>
          <td>{{ data.sortOrder }}</td>
          <td (click)="getRowDetails(data, i)">
            <span >{{data.graphName}}</span>
           
          </td>
          <td><input type="text" class="form-control" value [(ngModel)]="data.displayName" /></td>
          <td >
            <div class="d-flex justify-content-center">
              <div class="form-check" *ngIf="!data.disabled">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="hidden"
                  [checked]="data.isHidden"
                  #configcheckbox
                  (change)="hideStatus($event, data)"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Hide
                </label>
              </div>
              &nbsp;
              <div class="form-check" *ngIf="data?.isCustom">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="delete"
                  [checked]="data.isDeleted"
                  #configcheckbox
                  (change)="deleteStatus($event, data)"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Delete &nbsp;
                </label> 
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  [checked]="data.isSlideShow"
                  #configcheckbox
                  (change)="addToSlideShow($event, data)"                
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Add to Slideshow
                </label>
              </div>
            </div>
          </td>
         
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row mb-3">
    <div class="offset-md-10 col-lg-1 text-right">
      <button class="btn btn-primary" (click)="updateDashboard(nonDragChartData,dragChartData)">
        Update
      </button>
    </div>
    <!-- <div class="col-lg-1 text-right">
      <button class="btn btn-secondary resetChanges" (click)="restChanges()">
        Reset
      </button>
    </div> -->
    <div class="col-lg-1 text-right">
      <button class="btn btn-danger cancelChanges" (click)="cancelChanges()">
        Cancel 
      </button>
    </div>
  <!-- svg -->
  <ng-template #dragHandleTmpl>
    <svg
      class="bi bi-list handle"
      width="1em"
      height="1em"
      viewBox="0 0 16 16"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M2.5 11.5A.5.5 0 013 11h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 7h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 3h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"
        clip-rule="evenodd"
      />
    </svg>
  </ng-template>
  <!-- !svg -->
</div>
</div>


